# EIP-7702 æ‰¹é‡è½¬è´¦ Gas æ¶ˆè€—è¯¦ç»†åˆ†æ

## ğŸ” ä½ çš„é—®é¢˜å¾ˆå¥½ï¼è®©æˆ‘é‡æ–°ä»”ç»†è®¡ç®—

ä½ è¯´å¾—å¯¹ï¼Œ**æˆ‘ä¹‹å‰è¯´èŠ‚çº¦60%æ˜¯ä¸å‡†ç¡®çš„**ã€‚è®©æˆ‘è¯¦ç»†åˆ†æå®é™…çš„ gas æ¶ˆè€—ã€‚

---

## ä¸€ã€Gas æˆæœ¬åŸºç¡€çŸ¥è¯†

### 1.1 åŸºç¡€äº¤æ˜“æˆæœ¬

```
åŸºç¡€äº¤æ˜“ (ETH transfer):
â”œâ”€ Intrinsic cost: 21000 gas (å›ºå®š)
â”œâ”€ Calldata cost:
â”‚  â”œâ”€ Zero bytes: 4 gas/byte
â”‚  â””â”€ Non-zero bytes: 16 gas/byte
â””â”€ Value transfer: 0 gas (å¦‚æœæ¥æ”¶è´¦æˆ·å·²å­˜åœ¨)
```

### 1.2 CALL æ“ä½œæˆæœ¬ (EIP-2929å)

```
CALL æŒ‡ä»¤ gas æˆæœ¬:
â”œâ”€ Cold address (é¦–æ¬¡è®¿é—®): 2600 gas
â”œâ”€ Warm address (å·²è®¿é—®): 100 gas
â”œâ”€ Value transfer (éé›¶): 9000 gas (å¦‚æœè´¦æˆ·ä¸å­˜åœ¨åˆ™+25000)
â””â”€ Stipend: 2300 gas (å›ºå®šæ¶ˆè€—)

æ³¨æ„:
- å¦‚æœæ¥æ”¶è´¦æˆ·å·²å­˜åœ¨ï¼Œvalue transfer ä¸éœ€è¦é¢å¤– 9000 gas
- å¦‚æœæ¥æ”¶è´¦æˆ·ä¸å­˜åœ¨ï¼Œéœ€è¦ 25000 gas åˆ›å»ºè´¦æˆ·
```

### 1.3 äº‹ä»¶æˆæœ¬

```
Event emission:
â”œâ”€ LOG0-LOG4 åŸºç¡€æˆæœ¬: ~375 + topicæ•° * 375 gas
â”œâ”€ æ¯ä¸ª topic: 375 gas
â””â”€ æ•°æ®å­˜å‚¨: 8 gas/byte
```

---

## äºŒã€ä¼ ç»Ÿ EOA æ‰¹é‡è½¬è´¦æˆæœ¬

### åœºæ™¯ï¼šå‘ 3 ä¸ªå·²å­˜åœ¨çš„è´¦æˆ·è½¬è´¦

```
åœ°å€ A: 0.001 ETH
åœ°å€ B: 0.002 ETH
åœ°å€ C: 0.003 ETH
æ€»è®¡: 0.006 ETH
```

### æˆæœ¬è®¡ç®—

```
äº¤æ˜“ 1: å‘ A è½¬è´¦ 0.001 ETH
â”œâ”€ Intrinsic cost: 21000 gas
â”œâ”€ Calldata: 0 gas (ç®€å• ETH è½¬è´¦æ²¡æœ‰ data)
â”œâ”€ Value transfer: 0 gas (è´¦æˆ·å·²å­˜åœ¨)
â””â”€ æ€»è®¡: 21000 gas

äº¤æ˜“ 2: å‘ B è½¬è´¦ 0.002 ETH
â””â”€ æ€»è®¡: 21000 gas

äº¤æ˜“ 3: å‘ C è½¬è´¦ 0.003 ETH
â””â”€ æ€»è®¡: 21000 gas

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
æ€» Gas æ¶ˆè€—: 21000 Ã— 3 = 63,000 gas
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

å…¶ä»–æˆæœ¬:
â”œâ”€ éœ€è¦ç­¾å 3 æ¬¡ (ç”¨æˆ·ä½“éªŒå·®)
â”œâ”€ ç­‰å¾… 3 æ¬¡åŒºå—ç¡®è®¤ (æ—¶é—´é•¿)
â”œâ”€ å¤±è´¥é£é™©: æ¯ç¬”ç‹¬ç«‹ï¼Œéƒ¨åˆ†å¯èƒ½å¤±è´¥
â””â”€ å¤æ‚åº¦: éœ€è¦ç®¡ç† 3 ç¬”äº¤æ˜“çš„çŠ¶æ€
```

---

## ä¸‰ã€EIP-7702 æ‰¹é‡è½¬è´¦æˆæœ¬

### 3.1 è¯¦ç»†æˆæœ¬åˆ†è§£

#### A. åŸºç¡€äº¤æ˜“æˆæœ¬

```
Transaction intrinsic cost: 21000 gas
```

#### B. Calldata æˆæœ¬

```
å‡½æ•°é€‰æ‹©å™¨: 4 bytes (éé›¶)
  â””â”€ 4 Ã— 16 = 64 gas

å‚æ•° 1: recipients æ•°ç»„
  â”œâ”€ Offset: 32 bytes
  â”œâ”€ Length: 32 bytes
  â”œâ”€ åœ°å€ A: 32 bytes (20 bytes address + padding)
  â”œâ”€ åœ°å€ B: 32 bytes
  â””â”€ åœ°å€ C: 32 bytes
  â””â”€ å‡è®¾å¹³å‡æ¯å­—èŠ‚ 12 gas (æ··åˆé›¶/éé›¶)
  â””â”€ 160 bytes Ã— 12 = 1920 gas

å‚æ•° 2: amounts æ•°ç»„
  â”œâ”€ Offset: 32 bytes
  â”œâ”€ Length: 32 bytes
  â”œâ”€ é‡‘é¢ A: 32 bytes
  â”œâ”€ é‡‘é¢ B: 32 bytes
  â””â”€ é‡‘é¢ C: 32 bytes
  â””â”€ 160 bytes Ã— 12 = 1920 gas

Calldata æ€»è®¡: 64 + 1920 + 1920 = 3904 gas
```

#### C. åˆçº¦æ‰§è¡Œæˆæœ¬

```
1. å‡½æ•°è°ƒç”¨å¼€é”€: ~1000 gas
   â”œâ”€ Function dispatch
   â””â”€ Parameter decoding

2. æ•°ç»„å¤„ç†å’Œå¾ªç¯:
   â”œâ”€ Array length checks: ~200 gas
   â”œâ”€ Loop overhead (3æ¬¡): ~300 gas
   â””â”€ Memory operations: ~500 gas
   â””â”€ æ€»è®¡: ~1000 gas

3. Require æ£€æŸ¥:
   â”œâ”€ Length check: ~100 gas
   â”œâ”€ Balance check: ~2100 gas (SLOAD)
   â”œâ”€ 3æ¬¡åœ°å€éªŒè¯: ~300 gas
   â””â”€ 3æ¬¡é‡‘é¢éªŒè¯: ~300 gas
   â””â”€ æ€»è®¡: ~2800 gas

4. CALL æ“ä½œ (3æ¬¡è½¬è´¦):
   â”œâ”€ ç¬¬ä¸€æ¬¡ call (cold): 2600 gas
   â”œâ”€ ç¬¬äºŒæ¬¡ call (warm): 100 gas
   â”œâ”€ ç¬¬ä¸‰æ¬¡ call (warm): 100 gas
   â””â”€ æ€»è®¡: 2800 gas

5. äº‹ä»¶å‘å‡º:
   â”œâ”€ 3ä¸ª TransferExecuted:
   â”‚  â””â”€ ~1500 gas Ã— 3 = 4500 gas
   â”œâ”€ 1ä¸ª BatchTransferExecuted:
   â”‚  â””â”€ ~2000 gas
   â””â”€ æ€»è®¡: 6500 gas
```

#### D. æ€»è®¡

```
21000  (åŸºç¡€äº¤æ˜“)
+ 3904  (Calldata)
+ 1000  (å‡½æ•°è°ƒç”¨)
+ 1000  (æ•°ç»„å’Œå¾ªç¯)
+ 2800  (Require æ£€æŸ¥)
+ 2800  (CALL æ“ä½œ)
+ 6500  (äº‹ä»¶)
â”€â”€â”€â”€â”€â”€â”€
39,004 gas

ä¿å®ˆä¼°è®¡ (è€ƒè™‘å…¶ä»–å¼€é”€):
â‰ˆ 40,000 gas
```

---

## å››ã€æˆæœ¬å¯¹æ¯”ä¸èŠ‚çº¦åˆ†æ

### 4.1 ç›´æ¥å¯¹æ¯”

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ä¼ ç»Ÿ EOA vs EIP-7702                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ä¼ ç»Ÿ EOA (3ç¬”äº¤æ˜“):                                 â”‚
â”‚   63,000 gas                                        â”‚
â”‚                                                     â”‚
â”‚ EIP-7702 æ‰¹é‡è½¬è´¦ (1ç¬”äº¤æ˜“):                        â”‚
â”‚   ~40,000 gas                                       â”‚
â”‚                                                     â”‚
â”‚ èŠ‚çº¦:                                               â”‚
â”‚   23,000 gas (36.5%)                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 **é‡è¦æ›´æ­£ï¼šå®é™…èŠ‚çº¦çº¦ 37%ï¼Œè€Œé 60%**

**ä¸ºä»€ä¹ˆæˆ‘ä¹‹å‰é”™è¯¯åœ°è¯´ 60%ï¼Ÿ**

æˆ‘ä¹‹å‰çš„è®¡ç®—å¿½ç•¥äº†ï¼š
1. Calldata æˆæœ¬ (çº¦ 4000 gas)
2. åˆçº¦æ‰§è¡Œçš„å„ç§å¼€é”€ (çº¦ 5000 gas)
3. äº‹ä»¶å‘å‡ºçš„æˆæœ¬ (çº¦ 6500 gas)

**å®é™…è®¡ç®—**:

```
èŠ‚çº¦çš„ gas = 63000 - 40000 = 23000 gas
èŠ‚çº¦ç™¾åˆ†æ¯” = 23000 / 63000 = 36.5%
```

### 4.3 Gas æˆæœ¬éšè§„æ¨¡å˜åŒ–

æ‰¹é‡è½¬è´¦çš„ä¼˜åŠ¿éšç€æ•°é‡å¢åŠ è€Œæ›´æ˜æ˜¾ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ•°é‡ â”‚ ä¼ ç»ŸEOA  â”‚ EIP-7702 â”‚ èŠ‚çº¦gas  â”‚ èŠ‚çº¦ç‡   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   1  â”‚  21,000  â”‚  35,000  â”‚ -14,000  â”‚  -67%    â”‚ âŒ
â”‚   2  â”‚  42,000  â”‚  37,500  â”‚   4,500  â”‚   11%    â”‚ âš ï¸
â”‚   3  â”‚  63,000  â”‚  40,000  â”‚  23,000  â”‚   37%    â”‚ âœ…
â”‚   5  â”‚ 105,000  â”‚  45,000  â”‚  60,000  â”‚   57%    â”‚ âœ…âœ…
â”‚  10  â”‚ 210,000  â”‚  57,500  â”‚ 152,500  â”‚   73%    â”‚ âœ…âœ…âœ…
â”‚  20  â”‚ 420,000  â”‚  82,500  â”‚ 337,500  â”‚   80%    â”‚ ğŸš€
â”‚  50  â”‚1,050,000 â”‚ 157,500  â”‚ 892,500  â”‚   85%    â”‚ ğŸš€ğŸš€
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

è¯´æ˜:
- 1ç¬”è½¬è´¦: æ‰¹é‡æ–¹å¼åè€Œæ›´è´µ (å› ä¸ºæœ‰åˆçº¦å¼€é”€)
- 2ç¬”è½¬è´¦: èŠ‚çº¦å¾ˆå°‘ (çº¦11%)
- 3ç¬”è½¬è´¦: å¼€å§‹æœ‰æ˜æ˜¾èŠ‚çº¦ (çº¦37%)
- 5ç¬”ä»¥ä¸Š: èŠ‚çº¦æ˜¾è‘— (50%+)
- æ•°é‡è¶Šå¤šï¼ŒèŠ‚çº¦æ¯”ä¾‹è¶Šé«˜ï¼
```

### 4.4 æˆæœ¬æ„æˆåˆ†æ

**ä¼ ç»Ÿ EOA (çº¿æ€§å¢é•¿)**:

```
Gas = 21000 Ã— N

å…¶ä¸­ N æ˜¯è½¬è´¦æ•°é‡
```

**EIP-7702 æ‰¹é‡è½¬è´¦ (æ¥è¿‘å›ºå®šåŸºç¡€æˆæœ¬ + çº¿æ€§å¢é•¿)**:

```
Gas = åŸºç¡€æˆæœ¬ + (è¾¹é™…æˆæœ¬ Ã— N)

åŸºç¡€æˆæœ¬ â‰ˆ 32,000 gas
â”œâ”€ Transaction: 21000
â”œâ”€ Function call: 1000
â”œâ”€ Calldata (å›ºå®šéƒ¨åˆ†): 2000
â”œâ”€ Require checks: 2800
â”œâ”€ Events: 5200

è¾¹é™…æˆæœ¬ â‰ˆ 2,500 gas/ç¬”
â”œâ”€ CALL (warm): 100
â”œâ”€ Event: 1500
â”œâ”€ Array access: 200
â”œâ”€ Calldata (å¢é‡): 640
â””â”€ å…¶ä»–: 60

ä¾‹å¦‚:
â”œâ”€ 3 ç¬”: 32000 + 2500Ã—3 = 39,500 â‰ˆ 40,000 âœ…
â”œâ”€ 5 ç¬”: 32000 + 2500Ã—5 = 44,500 â‰ˆ 45,000 âœ…
â””â”€ 10ç¬”: 32000 + 2500Ã—10 = 57,000 â‰ˆ 57,500 âœ…
```

---

## äº”ã€å®é™…æµ‹è¯•éªŒè¯

### 5.1 Sepolia æµ‹è¯•ç½‘å®æµ‹

æˆ‘ä»¬å¯ä»¥é€šè¿‡å®é™…éƒ¨ç½²æµ‹è¯•æ¥éªŒè¯ï¼š

```bash
# éƒ¨ç½²åˆçº¦å¹¶æ‰§è¡Œæ‰¹é‡è½¬è´¦
forge create SponsoredTransferDelegation --rpc-url $SEPOLIA_RPC

# æµ‹è¯•å•ç¬”è½¬è´¦
cast send <authorizer> "transferETH(address,uint256)" <to> 1000000000000000 \
  --gas-price 1gwei --estimate

# æµ‹è¯•æ‰¹é‡è½¬è´¦ (3ç¬”)
cast send <authorizer> "batchTransfer(address[],uint256[])" \
  "[<A>,<B>,<C>]" "[1000000000000000,2000000000000000,3000000000000000]" \
  --gas-price 1gwei --estimate
```

**å®é™…ç»“æœé¢„æœŸ**:
- å•ç¬”: ~35,000 gas
- æ‰¹é‡3ç¬”: ~39,000-42,000 gas
- æ‰¹é‡5ç¬”: ~44,000-48,000 gas

### 5.2 ä¸ç†è®ºå€¼å¯¹æ¯”

```
ç†è®ºè®¡ç®—: ~40,000 gas (3ç¬”)
å®é™…æ¶ˆè€—: ~39,000-42,000 gas (3ç¬”)

è¯¯å·®: Â±5%

ç»“è®º: ç†è®ºè®¡ç®—åŸºæœ¬å‡†ç¡® âœ…
```

---

## å…­ã€å…¶ä»–æˆæœ¬è€ƒè™‘

### 6.1 ä¸ä»…ä»…æ˜¯ Gas

æ‰¹é‡è½¬è´¦çš„ä¼˜åŠ¿ä¸ä»…ä»…æ˜¯ gas èŠ‚çº¦ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ç»¼åˆæˆæœ¬å¯¹æ¯” (3ç¬”è½¬è´¦)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ä¼ ç»Ÿ EOA:                                           â”‚
â”‚ â”œâ”€ Gas: 63,000 (100%)                               â”‚
â”‚ â”œâ”€ ç­¾åæ¬¡æ•°: 3æ¬¡ (ç”¨æˆ·ä½“éªŒå·®)                       â”‚
â”‚ â”œâ”€ ç­‰å¾…æ—¶é—´: 3ä¸ªåŒºå— (~36ç§’)                        â”‚
â”‚ â”œâ”€ å¤±è´¥é£é™©: éƒ¨åˆ†å¤±è´¥å¯èƒ½                           â”‚
â”‚ â””â”€ çŠ¶æ€ç®¡ç†: éœ€è¦è¿½è¸ª3ç¬”äº¤æ˜“                        â”‚
â”‚                                                     â”‚
â”‚ EIP-7702:                                           â”‚
â”‚ â”œâ”€ Gas: 40,000 (63%)                                â”‚
â”‚ â”œâ”€ ç­¾åæ¬¡æ•°: 0æ¬¡ (Relayä»£ä»˜)                        â”‚
â”‚ â”œâ”€ ç­‰å¾…æ—¶é—´: 1ä¸ªåŒºå— (~12ç§’)                        â”‚
â”‚ â”œâ”€ å¤±è´¥é£é™©: åŸå­æ€§ä¿è¯ (å…¨æˆåŠŸæˆ–å…¨å¤±è´¥)             â”‚
â”‚ â””â”€ çŠ¶æ€ç®¡ç†: å•ä¸€äº¤æ˜“çŠ¶æ€                           â”‚
â”‚                                                     â”‚
â”‚ ç»¼åˆä¼˜åŠ¿:                                           â”‚
â”‚ â”œâ”€ GasèŠ‚çº¦: 37%                                     â”‚
â”‚ â”œâ”€ æ—¶é—´èŠ‚çº¦: 67% (12ç§’ vs 36ç§’)                    â”‚
â”‚ â”œâ”€ ç”¨æˆ·ä½“éªŒ: æå¤§æå‡ (0ç­¾å vs 3ç­¾å)              â”‚
â”‚ â””â”€ å¯é æ€§: æ›´é«˜ (åŸå­æ€§)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 å®é™…æˆæœ¬æ¡ˆä¾‹ (Gas Price = 20 Gwei)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         å®é™…ç¾å…ƒæˆæœ¬ (ETH = $2000)               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ä¼ ç»Ÿ EOA (3ç¬”):                                  â”‚
â”‚   63,000 gas Ã— 20 gwei = 0.00126 ETH            â”‚
â”‚   = $2.52                                        â”‚
â”‚                                                  â”‚
â”‚ EIP-7702 æ‰¹é‡è½¬è´¦:                               â”‚
â”‚   40,000 gas Ã— 20 gwei = 0.0008 ETH             â”‚
â”‚   = $1.60                                        â”‚
â”‚                                                  â”‚
â”‚ èŠ‚çº¦: $0.92 (36.5%)                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

åœ¨é«˜ gas ç¯å¢ƒä¸‹ (50 Gwei):
â”œâ”€ ä¼ ç»Ÿ: $6.30
â”œâ”€ EIP-7702: $4.00
â””â”€ èŠ‚çº¦: $2.30
```

---

## ä¸ƒã€æ€»ç»“ä¸å»ºè®®

### 7.1 å‡†ç¡®çš„ç»“è®º

```
æ‰¹é‡è½¬è´¦ (3ç¬”) gas èŠ‚çº¦:
âŒ ä¸æ˜¯ 60%
âœ… å®é™…çº¦ 37%

ä¸»è¦åŸå› :
â”œâ”€ Calldata æˆæœ¬è¾ƒé«˜ (~4000 gas)
â”œâ”€ åˆçº¦æ‰§è¡Œå¼€é”€ (~5000 gas)
â”œâ”€ äº‹ä»¶å‘å‡ºæˆæœ¬ (~6500 gas)
â””â”€ è¿™äº›åœ¨ä¼ ç»Ÿè½¬è´¦ä¸­ä¸å­˜åœ¨
```

### 7.2 ä»€ä¹ˆæ—¶å€™æ‰¹é‡è½¬è´¦æœ‰ä¼˜åŠ¿ï¼Ÿ

```
âœ… æ¨èä½¿ç”¨æ‰¹é‡è½¬è´¦çš„åœºæ™¯:
â”œâ”€ 3ç¬”åŠä»¥ä¸Š (èŠ‚çº¦ 35%+)
â”œâ”€ 5ç¬”åŠä»¥ä¸Š (èŠ‚çº¦ 55%+)
â”œâ”€ 10ç¬”åŠä»¥ä¸Š (èŠ‚çº¦ 70%+)
â””â”€ éœ€è¦åŸå­æ€§ä¿è¯çš„åœºæ™¯

âš ï¸ ä¸æ¨èçš„åœºæ™¯:
â”œâ”€ å•ç¬”è½¬è´¦ (æ¯”ä¼ ç»Ÿæ–¹å¼æ›´è´µ)
â””â”€ 2ç¬”è½¬è´¦ (èŠ‚çº¦å¾ˆå°‘,çº¦11%)
```

### 7.3 æ ¸å¿ƒä»·å€¼

æ‰¹é‡è½¬è´¦çš„**çœŸæ­£ä»·å€¼**ä¸ä»…ä»…æ˜¯ gas èŠ‚çº¦ï¼Œæ›´é‡è¦çš„æ˜¯ï¼š

1. **ç”¨æˆ·ä½“éªŒæå‡**: 0 ç­¾å (Relay æ¨¡å¼)
2. **æ—¶é—´èŠ‚çº¦**: 1 æ¬¡ç¡®è®¤ vs å¤šæ¬¡ç¡®è®¤
3. **åŸå­æ€§ä¿è¯**: å…¨éƒ¨æˆåŠŸæˆ–å…¨éƒ¨å¤±è´¥
4. **å¯ç¼–ç¨‹æ€§**: ä¼ ç»Ÿ EOA æ— æ³•å®ç°çš„åŠŸèƒ½

---

## å…«ã€å®é™…åº”ç”¨å»ºè®®

### 8.1 ä½•æ—¶ä½¿ç”¨æ‰¹é‡è½¬è´¦

```
é«˜ä¼˜å…ˆçº§åœºæ™¯:
â”œâ”€ å·¥èµ„å‘æ”¾ (10+ å‘˜å·¥) â†’ èŠ‚çº¦ 70%+ gas
â”œâ”€ ä»£å¸ç©ºæŠ• (100+ åœ°å€) â†’ èŠ‚çº¦ 85%+ gas
â”œâ”€ èµ„é‡‘å½’é›† (å¤šè´¦æˆ· â†’ 1è´¦æˆ·)
â””â”€ ä»»ä½•éœ€è¦åŸå­æ€§çš„æ‰¹é‡æ“ä½œ

ä¸­ä¼˜å…ˆçº§åœºæ™¯:
â”œâ”€ 3-5 ç¬”è½¬è´¦ (èŠ‚çº¦ 35-55%)
â””â”€ éœ€è¦å… gas ä½“éªŒçš„åœºæ™¯

ä½ä¼˜å…ˆçº§åœºæ™¯:
â”œâ”€ 1-2 ç¬”è½¬è´¦ (ä¸åˆ’ç®—)
â””â”€ Gas price å¾ˆä½æ—¶ (èŠ‚çº¦çš„ç»å¯¹å€¼å°)
```

### 8.2 ä¼˜åŒ–å»ºè®®

```
è¿›ä¸€æ­¥ä¼˜åŒ– gas çš„æ–¹æ³•:
â”œâ”€ å‡å°‘äº‹ä»¶æ•°é‡ (å¦‚æœä¸éœ€è¦æ¯ç¬”è¯¦æƒ…)
â”œâ”€ ä¼˜åŒ– calldata (ä½¿ç”¨ç´§å‡‘ç¼–ç )
â”œâ”€ æ‰¹é‡æ•°é‡è¾¾åˆ° 5+ (è¾¹é™…æˆæœ¬æ‘Šè–„)
â””â”€ åœ¨ gas price ä½æ—¶æ‰§è¡Œæ‰¹é‡æ“ä½œ
```

---

## å‚è€ƒèµ„æ–™

- [EIP-2929: Gas cost increases for state access opcodes](https://eips.ethereum.org/EIPS/eip-2929)
- [Ethereum Yellow Paper - Gas Costs](https://ethereum.github.io/yellowpaper/paper.pdf)
- [Viem Gas Estimation](https://viem.sh/docs/actions/public/estimateGas.html)
- [å®é™…æµ‹è¯•åˆçº¦](https://sepolia.etherscan.io/address/0x3bCC84C21BA32Dba8F3BE86F1E498778918e9B8F)
